# MCP Codex CLI

OpenAI ã® Codex CLI ã®ã‚·ãƒ³ãƒ—ãƒ«ãª MCP ã‚µãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ‘ãƒ¼ã§ã™ã€‚AI ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãŒ Model Context Protocol ã‚’é€šã˜ã¦ Codex ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ©Ÿèƒ½ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

**ç‰¹å¾´:**
- éã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆexecï¼‰ãƒ¢ãƒ¼ãƒ‰ã®ã¿å¯¾å¿œã§ã€MCP ç’°å¢ƒã«æœ€é©åŒ–
- ã‚·ãƒ³ãƒ—ãƒ«ãª1ã¤ã®ãƒãƒ£ãƒƒãƒˆãƒ„ãƒ¼ãƒ«ã‚’æä¾›
- TypeScript + Zod ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼
- é«˜é€Ÿãƒ»è»½é‡ãªãƒ†ã‚¹ãƒˆæ§‹æˆ

## æ¦‚è¦

ã“ã®ã‚µãƒ¼ãƒãƒ¼ã¯ã€Codex CLI ã¨å¯¾è©±ã™ã‚‹ 1 ã¤ã®ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ï¼š

- `chat`: ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã€è§£æã€ãƒ‡ãƒãƒƒã‚°ãªã©ã€ã‚ã‚‰ã‚†ã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ

## å‰ææ¡ä»¶

- [OpenAI Codex CLI](https://github.com/openai/codex-cli) ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»è¨­å®šæ¸ˆã¿ï¼ˆ--allow-install ãƒ•ãƒ©ã‚°ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- OpenAI API ã‚­ãƒ¼ã¾ãŸã¯ ChatGPT Plus/Pro/Team ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Node.js 22+ï¼ˆCodex CLI ã®è¦ä»¶ï¼‰

## ğŸš€ Quick Start with Claude Code

### 1. Add the MCP server

```bash
claude mcp add -s project codex-cli -- npx mcp-codex-cli --allow-install
```

ã¾ãŸã¯ã€ä»¥ä¸‹ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç¤ºã•ã‚Œã‚‹è¨­å®šã§ MCP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚

### 2. Try it out

ä¾‹ã¨ãªã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼š

- **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: "ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ React hooks ã‚’ä½¿ã†ã‚ˆã†ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¦"
- **ã‚³ãƒ¼ãƒ‰è§£æ**: "èªè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è§£æã—ã¦ JWT ãƒˆãƒ¼ã‚¯ãƒ³ã®å‡¦ç†æ–¹æ³•ã‚’èª¬æ˜ã—ã¦"  
- **ãƒ‡ãƒãƒƒã‚°**: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ãƒ­ãƒ¼ã§ç™ºç”Ÿã™ã‚‹ã“ã® TypeError ã‚’ãƒ‡ãƒãƒƒã‚°ã—ã¦"
- **ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ**: "ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ç”¨ TypeScript ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç”Ÿæˆã—ã¦"

## ğŸ”§ Installation Options

### Using npx with --allow-install flag

```json
{
  "mcpServers": {
    "mcp-codex-cli": {
      "command": "npx",
      "args": ["mcp-codex-cli", "--allow-install"]
    }
  }
}
```

### Local Development

1. ã‚¯ãƒ­ãƒ¼ãƒ³ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š

```bash
git clone https://github.com/suwa-sh/mcp-codex-cli
cd mcp-codex-cli
npm install
```

2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰ï¼š

```bash
npm run build
```

3. Claude Desktop ã®è¨­å®šã«è¿½åŠ ï¼š

```json
{
  "mcpServers": {
    "mcp-codex-cli": {
      "command": "node",
      "args": ["/path/to/mcp-codex-cli/dist/index.js", "--allow-install"]
    }
  }
}
```

## ğŸ› ï¸ Available Tools

### chat

ã‚ã‚‰ã‚†ã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¿ã‚¹ã‚¯ã‚’éã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã—ã¾ã™ã€‚

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼š**

- `prompt`ï¼ˆå¿…é ˆï¼‰ï¼šå®Ÿè¡Œã™ã‚‹ã‚¿ã‚¹ã‚¯ã®èª¬æ˜
- `approvalLevel`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ï¼š"auto-edit"ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Š/æ›¸ãè¾¼ã¿ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã€"full-auto"ï¼ˆå®Œå…¨è‡ªå‹•ï¼‰
- `model`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ï¼šä½¿ç”¨ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼š"gpt-5"ï¼‰
- `workingDir`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ï¼šã‚¿ã‚¹ã‚¯ç”¨ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

## ğŸ’¡ Example Usage

### chat

```typescript
// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
chat({ 
  prompt: "UserDashboard ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä»£ã‚ã‚Šã« React hooks ã‚’ä½¿ã†ã‚ˆã†ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°",
  approvalLevel: "auto-edit",
  workingDir: "./src/components"
});

// ã‚³ãƒ¼ãƒ‰åˆ†æ
chat({
  prompt: "./src/utils/auth.ts ãƒ•ã‚¡ã‚¤ãƒ«ã§ JWT ãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã©ã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™ã‹ï¼Ÿ"
});

// ãƒ‡ãƒãƒƒã‚°
chat({
  prompt: "TypeError: Cannot read property 'length' of undefined ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°ã§ç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚./src/components/UserForm.tsx ã‚’ç¢ºèªã—ã¦ãƒ‡ãƒãƒƒã‚°ã—ã¦ãã ã•ã„ã€‚"
});

// ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
chat({
  prompt: "ãƒãƒªã‚¢ãƒ³ãƒˆï¼ˆprimaryã€secondaryã€dangerï¼‰ã¨ã‚µã‚¤ã‚ºï¼ˆsmallã€mediumã€largeï¼‰ã‚’æŒã¤å†åˆ©ç”¨å¯èƒ½ãª Button ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ TypeScript + React ã§ ./src/components/Button.tsx ã«ä½œæˆã—ã¦ãã ã•ã„",
  model: "gpt-5"
});
```

## âš™ï¸ Configuration

### Environment Variables

Codex CLI ã®èªè¨¼ã‚’è¨­å®šï¼š

```bash
# ã‚ªãƒ—ã‚·ãƒ§ãƒ³1ï¼šOpenAI API ã‚­ãƒ¼
export OPENAI_API_KEY=your_api_key_here

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³2ï¼šChatGPT ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨ï¼ˆcodex-cli ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³ï¼‰
codex auth login
```

### Default Model

ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ã¯ **gpt-5** ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ï¼ˆCodex CLI ã®ç¾åœ¨ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã€‚ä»»æ„ã®ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã§ `model` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã—ã¦ã“ã‚Œã‚’ä¸Šæ›¸ãã§ãã¾ã™ï¼š

- `gpt-5`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- `gpt-4.1`
- `gpt-4.1-mini`
- `o1`
- `o1-mini`

### Approval Levels

- **auto-edit**ï¼šãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿å–ã‚Šã¨æ›¸ãè¾¼ã¿ï¼›ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã«ã¯æ‰¿èªãŒå¿…è¦ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- **full-auto**ï¼šå®Œå…¨ã«è‡ªå‹•å®Ÿè¡Œï¼ˆæ³¨æ„ã—ã¦ä½¿ç”¨ï¼‰

> **æ³¨æ„:** ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã¨ "suggest" æ‰¿èªãƒ¬ãƒ™ãƒ«ã¯ MCP ç’°å¢ƒã§ã®åˆ¶ç´„ã«ã‚ˆã‚Šå»ƒæ­¢ã•ã‚Œã¾ã—ãŸã€‚

## ğŸ”— Related Links

- [Model Context Protocolï¼ˆMCPï¼‰](https://modelcontextprotocol.io/)
- [OpenAI Codex CLI](https://github.com/openai/codex-cli)
